{% load static %}

<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- Page Title and Description -->
    <title>All Jobs</title>
    <meta name="description" content="">

    <!-- Favicon -->
    <link rel="icon" href="{% static '/images/carrer-fav-icon.png' %}" type="image/gif" sizes="16x16">
    
    <link rel="stylesheet" href="{% static '/css/jobstyle2.css' %}">

    <!-- External CSS -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Raleway:ital,wght@0,200;0,300;0,400;0,500;0,600;0,800;1,200&display=swap">
    <link rel="stylesheet" href="{% static '/css/jobstyle.css' %}">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.7.2/css/all.css">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">

    <!-- Owl Carousel (if needed) -->
    <!--
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/OwlCarousel2/2.3.4/assets/owl.theme.default.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/OwlCarousel2/2.3.4/assets/owl.carousel.min.css">
    -->

    <!-- Swiper (if needed) -->
    <!--
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/Swiper/5.4.5/css/swiper.css">
    -->

    <!-- AOS Library (if needed) -->
    <!--
    <link rel="stylesheet" href="https://unpkg.com/aos@next/dist/aos.css">
    -->

    <!-- jQuery (ensure only one version is included) -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    
    <!-- Additional Scripts (optional) -->
    <!--
    <script src="https://code.jquery.com/jquery-3.1.1.min.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    -->

    <style>
        .nav-link {
                 font-size: 20px;
                 font-weight: bold;
                 color: #fff !important;
                 margin: 0 5px;
                 padding-bottom: 15px;
                 position: relative;
               }
      
               .nav-link:hover,
               .active {
                 border-bottom: 2px solid #fff;
                 cursor: pointer;
               }
               .navbar-brand img{
                       margin-left: 30px;
      
                     }
      
               .navbar-brand p {
                 margin: 0;
                 font-size: 28px;
                 font-weight: bold;
                 color: white"
               }
      
               .navbar-toggler-icon {
                 background-image: url("data:image/svg+xml;charset=utf8,%3Csvg viewBox='0 0 30 30' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath stroke='rgba%28255, 255, 255, 1%29' stroke-width='2' stroke-linecap='round' stroke-miterlimit='10' d='M4 7h22M4 15h22M4 23h22'/%3E%3C/svg%3E");
               }
      
               @media (max-width: 990px) {
                 .navbar-collapse {
                   justify-content: flex-end;
                 }
                 .navbar-nav {
                   text-align: right;
                 }
      
                 .nav-item {
                   margin: 0;
                 }
      
                 .nav-link {
                   padding: 10px 0;
                   display: block;
                 }
               }
               @media (max-width: 500px) {
                 .navbar {
                   margin: 5px;
                 }
                 .navbar-brand img {
                   margin-left: 2px;
                   width: 40;
                 }
                 .navbar-brand p {
                   font-size: 20px;
                   margin: 0;
                 }
                 .navbar-toggler {
                   margin-right: 10px;
                 }
                 .navbar-collapse {
                   justify-content: flex-end;
                   margin-right: 10px;
                 }
                 .navbar-nav {
                   text-align: center;
                 }
               }
      </style>
</head>
      
<body>

    {% if call == "yes" %}
        <script>
        console.log("AGYE")
        window.alert("Application Submitted")</script>
    {% endif %}
        <!-- <nav class="nav">
            <div class="nav-logo">
                <img src="{% static 'images/company_logo.png' %}" alt="logo" />
                <p style="font-size: 28px; font-weight: bold;">Meta Scifor Technologies</p>
            </div>
            <div class="nav-menu" id="navMenu">
                <ul>
                    <li><a href="/" class="link" style="font-size: 20px; font-weight: bold;">Home</a></li>
            <li><a href="/services"class="link" style="font-size: 20px; font-weight: bold;">Services</a></li>
            <li><a href="/about-us" class="link" style="font-size: 20px; font-weight: bold;">About</a></li>
            <li><a href="/case_study" class="link" style="font-size: 20px; font-weight: bold;">Case Studies</a></li>
            <li><a href="/community" class="link" style="font-size: 20px; font-weight: bold;">Community</a></li>
            <li><a href="#footer" class="link" style="font-size: 20px; font-weight: bold;">Contact</a></li>
            <li><a href="#" class="link active" style="font-size: 20px; font-weight: bold;">Join Us</a></li>
                </ul>
            </div>

        </nav> -->
        <nav
        class="navbar navbar-expand-lg navbar-dark fixed-top"
        style="background-color: #000"
        >
        <a class="navbar-brand d-flex align-items-center" href="/">
          <img
            src="{% static 'images/Meta Scifor Icon.png' %}"
            width="60px"
            alt="Company Logo"
          />
          <p class="m-2">Meta Scifor Technologies</p>
        </a>
        <button
          class="navbar-toggler me-5 p-2"
          type="button"
          data-bs-toggle="collapse"
          data-bs-target="#navbarNav"
          aria-controls="navbarNav"
          aria-expanded="false"
          aria-label="Toggle navigation"
        >
          <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse justify-content-end" id="navbarNav">
          <ul class="navbar-nav">
            <li class="nav-item"><a class="nav-link" href="/">Home</a></li>
            <li class="nav-item">
              <a class="nav-link" href="/services">Services</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="/about-us">About</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="/case_study">Case Studies</a>
            </li>
            <!-- <li class="nav-item">
              <a class="nav-link" href="#footer">Contact</a>
            </li> -->
            <li class="nav-item">
              <a class="nav-link" href="/community">Community</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="/career">Join Us</a>
            </li>
          </ul>
        </div>
        </nav>

        

   <div class="all-jobs-heading"><b>Current</b> Openings</div> 

     <br />
    <div class="outer-jobs ">
        <div id="allJobs" ></div>
        <div id="description" ></div>

        <div class="right-image" col-12 col-md-6 offset-md-3 text-center">
            <img src="{% static 'images/hiring.svg' %}" alt="image"  />
        </div>
    </div>

    <!-- already commented -->
    <!-- <script src={% static 'js/fetchJobs.js' %}></script> -->


   <script>
        $(document).ready(() => {
            $.ajax({
                url: "/getAllJobs/",
                type: "get",
                success: function (response) {
                    console.log(response);
                    $("#allJobs").empty();
                    for (let i in response) {
                        console.log(response[i]);

                        $("#allJobs").append(
                            `<div class="jobs-card jobs-card-big">
                                <div class="job-card-content">
                                    
                                        <div class="job-intro">
                                            <span><h3>` +
                            response[i].position +
                            `</h3><img src="https://img.icons8.com/color/48/000000/group-skin-type-7.png"/></span>
                                            <button class='more-btn more-btn-all' onclick=getJob(` +
                            response[i].id +
                            `)>Know More</button>
                                            <span><p>` +
                            response[i].location +
                            `</p></span>
                                            <span><p>` +
                            response[i].jobType +
                            `</p></span>
                                        </div>
                                        <div class="jobs-count">
                                            <p>Openings: ` +
                            response[i].openings +
                            `</p>
                                            <p>Experience: ` +
                            response[i].experiences +
                            `</p>
                                        </div>
                                        <span class='desc'>` +
                            response[i].description +
                            `
                                        </span>
                                    
                                </div>
                            </div>`
                        );
                    }
                },
            });
        });
    </script>
    
    <script>
        function sleep(ms) {
            return new Promise((resolve) => setTimeout(resolve, ms));
        }

        function open() {
            sleep(5000).then(() => {
                cover.style.top = "-100vh";
                coverDown.style.top = "-100vh";
            });
        }
        function getJob(id) {
            $.ajax({
                url: "/job/?id=" + id,
                type: "get",
                success: function (response) {
                    $("#allJobs").css({
                        flex: ".4",
                    });
                    $("#description").css({
                        flex: ".6",
                    });
                    $(".right-image").css({
                        display: "none",
                    });
                    $(".desc").css({
                        display: "none",
                    });
                    $(".jobs-card-big").css({
                        width: "100%",
                    });
                    sleep(500).then(() => {
                        $("#description").empty();
                        $("#description").append(
                            `<div class="jobs-card jobs-card-big job-desc" style="height:80vh; width:100%;">
                            
                            <div class='hover'>
                                <button class="back-button-form" onclick=closeForm()>
                                    Back
                                </button>

                                <div class="l-form">
                                    <form action="/application/" method="post" class="form" id="form" enctype="multipart/form-data">
                                        {% csrf_token %}
                                        <h1 class="form_title">Upload Your Resume</h1>

                                        <input type="text" class="JobID" name="id" value="`+ response.id +`"></input>
                                        
                                        <div class="form_div">
                                            <input type="text" class="form_input" name="name" placeholder=" " required>
                                        <label for="" class="form_label">Name</label>
                                        </div>

                                        <div class="form_div">
                                            <input type="text" class="form_input" name="email" placeholder=" " required>
                                            <label for="" class="form_label">Email</label>
                                        </div>

                                        <div class="form_div">
                                            <input type="text" class="form_input" name="location" placeholder=" " required>
                                            <label for="" class="form_label">Location</label>
                                        </div>

                                        <div class="form_div">
                                            <input type="text" class="form_input" name="mobile" placeholder=" " required>
                                            <label for="" class="form_label">Mobile Number</label>
                                        </div>

                                        <div class="form_div">
                                            <input type="file" class="form_input_file" name="resume" placeholder=" " required>
                                        </div>

                                        <input type="submit" class="form_button" value="Submit">

                                        </form>
                                    </div>
                                </div>


                <div class="job-card-content">
                    
                        <div class="job-intro">
                            <span>
                                <h3>` +
                            response.position +
                            `</h3><img
                                    src="https://img.icons8.com/color/48/000000/group-skin-type-7.png" />
                            </span>
                            <button class="apply-now" onclick=openForm(` +
                            response.id +
                            `)>Apply Now</button>
                            <span>
                                <p>` +
                            response.location +
                            `</p>
                            </span>
                            <span>
                                <p>` +
                            response.jobType +
                            `</p>
                            </span>
                        </div>
                        <div class="jobs-count">
                            <p>Openings: ` +
                            response.openings +
                            `</p>
                            <p>Experience: ` +
                            response.experiences +
                            `</p>
                        </div>
                        <span>` +
                            response.description +
                            `</span>
                        <div>
                            ` +
                            response.requirements +
                            `    
                        </div>
                    
                </div>
            </div>`
                        );
                        $("#description").css({
                            opacity: "1",
                        });
                    });
                },
            });
        }

        function openForm() {
            $(".hover").css({
                right: "0px",
            });
        }

        function closeForm() {
            $(".hover").css({
                right: "-100%",
            });
        }
    </script> 



    <!-- already commented -->
    <!-- <script>
        $("#form").on("submit", function(e) {
        e.preventDefault();

        _data1 = new FormData(this);
        // _data["csrfmiddlewaretoken"] = $('input[name=csrfmiddlewaretoken]').val();
        console.log(_data1);
        console.log("AGEY");
        
        $.ajax({
            url: "/application/",
            type: "post",
            data: _data1,
            contentType: false,
            processData: false,
            success: function(response) {
                console.log(response)
                window.alert("Application Submitted")
            }
        });
    });
    </script> -->



    <hr class="line">


    <hr class="line"> 

    {% include 'carrer/footer.html' %}


    <!-- <script>
        AOS.init({
        //   offset: "200",
        //   delay: "100", 
        //   duration: "1000",
        });
      </script> -->

      <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
</body>

</html>